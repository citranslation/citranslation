name: CI
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    env:
      NUMPY_VERSION: stable
      ASTROPY_VERSION: stable
      SETUP_CMD: test
      PIP_DEPENDENCIES: ''
      CONDA_DEPENDENCIES: scipy pytest-cov
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Clone ci-helpers
      run: git clone git://github.com/astropy/ci-helpers.git
    - name: Setup Conda and Install Dependencies
      run: |
        source ci-helpers/travis/setup_conda_linux.sh
        conda install -y $CONDA_DEPENDENCIES
    - name: Run tests
      run: py.test
    - name: Code Climate
      uses: codeclimate/codeclimate@v1.0.0
      with:
        repo-token: ${{ secrets.CODECLIMATE_TOKEN }}
|End-of-Code|